# 节流和防抖

1. **定义和区别**:

   - 节流和防抖的概念。

     **节流**是一种减少函数执行频率的技术，它通过设定一个等待时间(`delay`)，确保函数在这段时间内只执行一次。如果在等待时间内再次触发事件，则不会执行函数，直到等待时间结束。

     **防抖**是一种控制函数在一段连续操作完成后只执行一次的技术。每当事件被触发时，它会重新开始计时，直到操作停止了指定的时间(`delay`)之后，函数才会执行。

2. **实现方式**:

   - 描述或编写节流和防抖函数的实现代码。

     实现**节流**的伪代码大致如下：

     ```js
     function throttle(func, delay) {
       let lastTime = 0;
       return function(...args) {
         const now = new Date().getTime();
         if (now - lastTime >= delay) {
           lastTime = now;
           func.apply(this, args);
         }
       };
     }
     ```

     实现**防抖**的伪代码大致如下：

     ```js
     function debounce(func, delay) {
       let timeoutId = null;
       return function(...args) {
         clearTimeout(timeoutId);
         timeoutId = setTimeout(() => {
           func.apply(this, args);
         }, delay);
       };
     }
     ```

3. **使用场景**:

   - **节流**通常用于限制执行频率较高的事件的回调函数，如：
     - 滚动事件（`scroll`）。
     - 窗口调整大小（`resize`）。
     - 鼠标移动（`mousemove`）。
     - 数据的实时上传（如在拖动过程中）。
   - **防抖**通常用于确保某些计算只在连续的活动结束后执行一次，如：
     - 表单验证（在用户停止输入后）。
     - 搜索框输入（在用户完成打字后）。
     - 点击提交按钮（避免多次提交）。

4. **优化**:

   - 讨论节流和防抖如何提高性能或改善用户体验。

     **节流**和**防抖**可以防止函数过于频繁地执行，这有助于避免不必要的计算和重绘，从而节省资源并提高应用性能。

   - 解释为什么在某些情况下不使用节流或防抖可能会导致问题。

     如果不使用节流或防抖，可能会因为处理大量事件而导致应用变慢，甚至在某些情况下导致浏览器崩溃。

5. **库函数**:

   - 许多开发人员选择使用像 lodash 这样的库，因为它们提供了现成的、经过测试的节流和防抖函数。
   - 虽然这些库函数提供了便利，但在只需要节流或防抖功能时引入整个库可能会导致不必要的代码膨胀。在这种情况下，自定义实现可能是更轻量级的解决方案。